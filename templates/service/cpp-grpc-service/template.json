{
  "$schema": "http://json.schemastore.org/template",
  "author": "TheSkiF4er",
  "classifications": ["service", "cpp", "grpc", "microservice"],
  "identity": "ProdStarter.Cpp.GrpcService",
  "name": "ProdStarterHub - C++ gRPC Service",
  "shortName": "prodstarter-cpp-grpc",
  "tags":{
    "language":"C++",
    "type":"service"
  },
  "sourceName": "cpp-grpc-service",
  "preferNameDirectory": true,
  "groupIdentity": "ProdStarter.Cpp",
  "shortDescription": "Production-ready C++ gRPC service template with health, reflection, TLS and observability hooks (CMake/Bazel support).",
  "symbols": {
    "ProjectName": {
      "type": "parameter",
      "datatype": "string",
      "replaces": "cpp-grpc-service",
      "description": "The project name / directory name for the scaffolded service.",
      "defaultValue": "my-grpc-service"
    },
    "Author": {
      "type": "parameter",
      "datatype": "string",
      "description": "Author or organization name for metadata.",
      "defaultValue": "Your Name"
    },
    "License": {
      "type": "parameter",
      "datatype": "choice",
      "choices": ["Apache-2.0", "MIT", "Proprietary"],
      "description": "License for the generated project.",
      "defaultValue": "Apache-2.0"
    },
    "CppStandard": {
      "type": "parameter",
      "datatype": "choice",
      "choices": ["17", "20", "23"],
      "description": "C++ standard to target for builds.",
      "defaultValue": "17"
    },
    "BuildSystem": {
      "type": "parameter",
      "datatype": "choice",
      "choices": ["cmake", "bazel"],
      "description": "Preferred build system for the scaffold (CMake or Bazel).",
      "defaultValue": "cmake"
    },
    "IncludeVcpkg": {
      "type": "parameter",
      "datatype": "bool",
      "description": "Include vcpkg example and vcpkg.json to pin C/C++ dependencies.",
      "defaultValue": true
    },
    "IncludeConan": {
      "type": "parameter",
      "datatype": "bool",
      "description": "Include conan example and conanfile to pin dependencies (alternative to vcpkg).",
      "defaultValue": false
    },
    "IncludePrometheus": {
      "type": "parameter",
      "datatype": "bool",
      "description": "Include prometheus-cpp integration scaffolding for metrics.",
      "defaultValue": true
    },
    "IncludeReflection": {
      "type": "parameter",
      "datatype": "bool",
      "description": "Enable gRPC server reflection by default.",
      "defaultValue": true
    },
    "IncludeTLS": {
      "type": "parameter",
      "datatype": "bool",
      "description": "Include TLS sample config and instructions (cert/key paths).",
      "defaultValue": true
    },
    "IncludeCI": {
      "type": "parameter",
      "datatype": "bool",
      "description": "Include GitHub Actions workflow for build/test/publish with scanning.",
      "defaultValue": true
    }
  },
  "postActions": [
    {
      "actionId": "git-init-0001",
      "description": "Initialize a git repository and create an initial commit",
      "manualInstructions": [
        { "text": "Run 'git init && git add . && git commit -m \"Initial scaffold from ProdStarterHub C++ gRPC template\"'" }
      ],
      "continueOnError": true,
      "args": {
        "executable": "bash",
        "args": "-lc \"git init && git add . && git commit -m 'Initial scaffold from ProdStarterHub C++ gRPC template' || true\""
      }
    },
    {
      "actionId": "build-check-0002",
      "description": "Attempt a quick configure & build (non-fatal) to validate the scaffold",
      "manualInstructions": [
        { "text": "Run 'mkdir -p build && cd build && cmake .. && cmake --build .' for CMake-based projects. For Bazel, run 'bazel build //...'." }
      ],
      "continueOnError": true,
      "args": {
        "executable": "bash",
        "args": "-lc \"if [ \"${BuildSystem}\" = \"cmake\" ]; then mkdir -p build && cd build && cmake .. && cmake --build . || true; else bazel build //... || true; fi\""
      }
    }
  ],
  "primaryOutputs": [
    { "path": "src/main.cpp" }
  ],
  "baselineVersion": "1.0.0",
  "symbolsHelp": {
    "description": "Customize project generation. Typical usage: set ProjectName, choose BuildSystem, pick dependency manager (vcpkg/conan).",
    "usageExamples": [
      "# Copy template and rename\ncp -R cpp-grpc-service my-svc && cd my-svc\n# if using vcpkg, follow vcpkg bootstrap and then build with CMake\nmkdir build && cd build && cmake -DCMAKE_TOOLCHAIN_FILE=../vcpkg/scripts/buildsystems/vcpkg.cmake .. && cmake --build ."
    ]
  },
  "replaces": {
    "cpp-grpc-service": "{ProjectName}",
    "ProdStarterHub": "{Author}"
  }
}
